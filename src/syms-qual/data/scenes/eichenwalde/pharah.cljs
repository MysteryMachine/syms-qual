(ns syms-qual.data.scenes.eichenwalde.pharah
  (:require [carmen.util :as anim :refer [scoot]]
            [syms-qual.util :as util :refer [inc-transition]]))

(def data
  {[:spawn :pharah 0]
   [:miranda/dialogue
    ["Symmetra" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                 [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Hello all. It is good to see you."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Satya! Ah! It is good to see you again my friend! Welcome to my homeland!"]
    ["Symmetra" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                 [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Likewise, Reinhardt. The countryside here is quite beautiful. I greatly enjoyed the views from the transport on the way here."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Satya, darling, Reinhardt, Pharah and I will be sitting on the objective today. We invite you to join us."]
    ["Symmetra" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                 [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I am worried about our composition, if I can be frank."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "You can be Frank if you want to, but I must insist upon a full name of Francis, so that you can be hoity-toity at parties!"]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Reinhardt!"]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Don’t be all business, Ana. If she’s worried, she needs a joke."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Fine. Anyway, Satya, darling, do not worry about our composition. I have been informed by a reliable source that Sombra is ditching the match today. That means that even when Widowmaker and Hanzo decide not to do anything, it’s still 4v5, and we have the most competent member of this unit."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Oh, Ana, that just isn’t true. I’m not that great."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I’m talking about myself. I have the highest rank. "]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Do you? I do not check mine. I am simply happy to smash with my big hammer."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I know, darling. Anyway, Satya, do not fret, I have carried teams worse than this."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Like that one team that was just support heroes after Reaper no showed."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "And he was captain! He drafted all supports because he claimed he’d be invincible with enough healing."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Ahahah, Gabriel. That man has made many mistakes but he sure knows how to make me laugh. "]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "We’ll be getting the last laugh today. I will make sure of it."]
    ["Symmetra" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                 [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I feel more comfortable knowing you feel confident going into this match."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "As you should. Don’t ever doubt my skills."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Ana is just superior. You’d think her back would hurt with how much she has to carry us."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "You don’t seem to carry anyone and your back’s terrible. "]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "My armor and hammer are already quite heavy on their own. That’s why I rely on your impeccable shot calling."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I do have a plan, but compensating for Hanzo’s terrible draft is going to be extremely difficult. Winston’s system is nonsense."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I think that it’s nice that you get to be captain if your birthday is coming up."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Half of our agents do not care about working to fulfill the objectives as a team, they just want to have some sort of free for all death match. Widomaker and Hanzo cry about being under utilized, and then they go and build teams like this."]
    ["Pharah" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
               [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Oh, hello mother, who is…"]
    ["Pharah" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
               [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Satya? What has she told you? Mama, I swear..."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Relax, Kinder treat, your mother hasn’t said anything embarrassing."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Yet."]
    ["Pharah" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
               [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "…"]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Anyway, I was recruiting her to join us on the payload. I will see you all there. Dismissed."]
    :-> [:spawn :pharah :choice]]

   [:spawn :pharah :choice]
   [:miranda/text-option
    "What will you do?"
    ["I wanna meet that payload." (constantly true)
     [:-> [:spawn :pharah :yes]]]
    ["Converse with your other teammates" (constantly true)
     [:-> [:spawn :pharah :no]]]]

   [:spawn :pharah :yes]
   (concat
    [:miranda/dialogue
     ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
             [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
      "Good to go? Alright. Let’s roll out."]]
    (inc-transition [:-> [:spawn :pharah :1]] :points/payload :points/pharah))

   [:spawn :pharah :no]
   [:miranda/dialogue
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Allow me to reiterate that this is not a choice. If I catch you doing something wacky with Hanzo or Widow, there will be consequences."]
    :-> [:spawn :choice]]

   [:spawn :pharah 1]
   [:miranda/dialogue
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Ah. Hello, Satya. I’m glad to see that I will not need to administer discipline."]
    ["Symmetra" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                 [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Oh. Um, yes."]
    ["Reinhardt" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                  [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Oh, do not mind her. Ana runs a tight ship is all."]
    :-> []]

   [:spawn :pharah 2 :a]
   [:miranda/dialogue
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Am I wrong though? Satya’s avoided the payload in most of her matches. I’m glad to see her turning things around."]
    ["Symmetra" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
                 [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     " I have found that bonding with my teammates first is an important part of creating a cohesive unit."]
    ["Pharah" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
               [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Yes, mother. Let her build a sense of camaraderie for asking her to lay down her life in combat."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "‘Ibna, do not think I didn’t notice you avoiding your duties to go on a date. If you wanted to do that, you might as well have remained a civilian like mama wanted, darling."]
    :-> [:spawn :pharah 3]]

   [:spawn :pharah 2 :b]
   [:miranda/dialogue
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "I’m a little tired of seeing people treat this program so lightly, Reinhardt. If I wanted to have my time wasted I wouldn’t have bothered to come out of retirement. This is a combat simulator not a dating service. "]
    ["Pharah" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
               [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Mama, I don’t think that’s fair to--"]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     "Don’t interrupt me, soldier. I did not ask for your opinion."]
    :-> [:spawn :pharah 3]]

   [:spawn :pharah 3]
   [:miranda/dialogue
    ["Pharah" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
               [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     " ..."]
    ["Ana" [[:reinhardt :_neutral (scoot -1)] [:ana :_neutral (scoot -2)]
            [:pharah :_reverseNeutral (scoot 0)] [:symmetra :_neutral (scoot 0)]]
     " Get to your post and provide us with some aerial support"]
    :-> [:pharah-1]]

   [:pharah-1]
   [:miranda/characters
    [[]]
    :-> [:pharah-1 :text]]

   [:pharah-1 :text]
   [:miranda/narration
    "Despite your numbers disadvantage, your attack round goes surprisingly well. There seems to be no one on the enemy team capable of dealing with Pharah’s aerial offense and her cover fire allows you, Ana, and Reinhardt to easily move through the choke point. Once you are through, Ana splits off to take the high ground, allowing her to safely provide long distance healing as the rest of you fight to capture control of the payload. Once the battering ram is in your possession, you manage to quickly traverse the rest of the map, taking  the second and the third points with ease."
    "Flush with the victory of your previous round, you begin to prepare for you turn on defense, setting up your turrets on the arc of the bridge with anticipatory glee. Once the round starts however, it becomes evident that most of the enemy team has decided to abandon the match. As you wait for the time limit on the round to expire, you sit with Pharah and Reinhardt in front of the payload while Ana lurks some distance off, crouched on the sniper’s perch on the far side of the point."
    :-> [:spawn :pharah 4]]})
